<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/student/layout}">

<head>
  <title layout:fragment="title">Danh sách thông báo</title>
</head>

<body>
<div layout:fragment="content">
  <div class="mt-6 mx-auto max-w-4xl">
    <h1 class="text-3xl font-bold text-blue-700 mb-6 text-center">Thông báo</h1>

    <div class="overflow-x-auto shadow-md rounded-lg">
      <table class="min-w-full divide-y divide-gray-200 table-auto">
        <thead class="bg-gray-100">
        <tr>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Nội dung
          </th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Thời gian
          </th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Trạng thái
          </th>
          <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            Hành động
          </th>
        </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
        <tr th:each="notif : ${notifications}">
          <td class="px-6 py-4 whitespace-normal" th:text="${notif.message}"></td>
          <td class="px-6 py-4 whitespace-nowrap text-gray-700" th:text="${#temporals.format(notif.createdAt, 'dd-MM-yyyy HH:mm')}"></td>
          <td class="px-6 py-4 whitespace-nowrap">
                        <span th:if="${notif.readStatus == 'unread'}" class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                            Chưa xem
                        </span>
            <span th:if="${notif.readStatus == 'read'}" class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                            Đã xem
                        </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap">
            <form th:action="@{/notifications/read/{id}(id=${notif.notificationId})}" method="post">
              <button type="submit"
                      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                      th:disabled="${notif.readStatus == 'read'}">
                Đánh dấu đã đọc
              </button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
</body>
</html>